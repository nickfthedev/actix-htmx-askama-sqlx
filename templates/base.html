<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{% block title %} - Todo {% endblock %}</title>
    {% block head %}
    <!-- Can be used for custom styles -->
    <style></style>
    <!-- Tailwind CSS File, build with cmd: npm run css:build -->
    <link href="public/style.css" rel="stylesheet" />
    <!-- Include HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <!-- TODO Debugging Mode Remove in Prod-->
    <script>
      htmx.logger = function (elt, event, data) {
        if (console) {
          console.log(event, elt, data);
        }
      };
    </script>
    {% endblock %}
  </head>

  <body>
    <div class="flex flex-col h-screen justify-between">
      <header class="">
        <div class="navbar bg-base-200">
          <a class="btn btn-ghost normal-case text-xl">Todo App</a>
        </div>
      </header>
      <main class="mb-auto flex justify-center mt-4 mx-2">
        {% block content %}
        <p>
          Placeholder content (Can be rendered by the use of super in Child
          template)
        </p>
        {% endblock %}
      </main>
      <footer class="footer footer-center p-4 bg-base-300 text-base-content">
        <aside>
          <p>Copyright Â© 2023 - All right reserved by ACME Industries Ltd</p>
        </aside>
      </footer>
    </div>

    <!-- AppToast hx-trigger event listener for toasts -->
    <script>
      document.body.addEventListener("AppToast", function (evt) {
        console.log("TRIGGERED");
        let msg = evt.detail.message;
        let toastElement = document.getElementById("AppToast");
        let toastElementContent = document.getElementById("AppToastContent");
        let toastElementMessage = document.getElementById("AppToastMessage");
        toastElementMessage.innerHTML = msg;
        switch (evt.detail.level) {
          case "info":
            toastElementContent.classList.add("alert-info");
            break;
          case "warning":
            toastElementContent.classList.add("alert-warning");
            break;
          case "error":
            toastElementContent.classList.add("alert-error");
            break;
          case "success":
            toastElementContent.classList.add("alert-success");
            break;
        }
        toastElement.classList.remove("invisible");
        setTimeout(function () {
          toastElement.classList.add("invisible");
          toastElementContent.classList.remove(
            "alert-info",
            "alert-warning",
            "alert-error",
            "alert-success"
          );
        }, 2000); // 2000 milliseconds (2 seconds)
      });
    </script>
    <!-- toasts -->
    <div id="AppToast" class="toast toast-top toast-center invisible">
      <div class="alert alert-info" id="AppToastContent">
        <span id="AppToastMessage">Task updated.</span>
      </div>
    </div>
  </body>
</html>
